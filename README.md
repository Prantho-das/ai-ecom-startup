# E-Commerce Predictor API

FastAPI backend for aggregating user, product, and order data from multiple e-commerce websites.

---

## Tech Stack

- **Framework:** FastAPI
- **Language:** Python 3.11+
- **Database:** PostgreSQL
- **ORM:** SQLAlchemy
- **Migrations:** Alembic
- **Auth:** JWT (python-jose + passlib)
- **HTTP Client:** httpx
- **Validation:** Pydantic v2

---

## Setup Instructions

### 1. Clone the repository

```bash
git clone <repository-url>
cd ecommerce-predictor-api
```

### 2. Create a virtual environment

```bash
python -m venv venv

# Linux / macOS
source venv/bin/activate

# Windows
venv\Scripts\activate
```

### 3. Install dependencies

```bash
pip install -r requirements.txt
```

### 4. Configure environment variables

```bash
cp .env.example .env
```

Open `.env` and set the values:

```
DATABASE_URL=postgresql://user:password@localhost:5432/ecom_predictor
SECRET_KEY=your-super-secret-key-here
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=60
```

### 5. Setup PostgreSQL database

Create the database:

```bash
createdb ecom_predictor
```

### 6. Run migrations

```bash
alembic upgrade head
```

### 7. Start the server

```bash
uvicorn app.main:app --reload
```

The API will be available at `http://localhost:8000`.

---

## API Documentation

Interactive docs are auto-generated by FastAPI:

| UI | URL |
|----|-----|
| Swagger UI | [http://localhost:8000/docs](http://localhost:8000/docs) |
| ReDoc | [http://localhost:8000/redoc](http://localhost:8000/redoc) |

---

## API Endpoints

| Method | Endpoint | Description |
|--------|----------|-------------|
| `GET` | `/` | Health check / welcome |
| `POST` | `/api/v1/auth/register` | Register a new user |
| `POST` | `/api/v1/auth/login` | Authenticate and get token |
| `GET` | `/api/v1/users/` | List users |
| `GET` | `/api/v1/users/{id}` | Get user by ID |
| `GET` | `/api/v1/products/` | List products |
| `GET` | `/api/v1/products/{id}` | Get product by ID |
| `POST` | `/api/v1/products/` | Create a product |
| `GET` | `/api/v1/orders/` | List orders |
| `GET` | `/api/v1/orders/{id}` | Get order by ID |
| `POST` | `/api/v1/orders/` | Create an order |

---

## Project Structure

```
├── app/
│   ├── __init__.py
│   ├── main.py              # FastAPI application entry point
│   ├── config.py            # Settings via pydantic-settings
│   ├── database.py          # SQLAlchemy engine, session & Base
│   ├── auth/                # Authentication (register, login, JWT)
│   ├── users/               # User CRUD & routes
│   ├── products/            # Product CRUD & routes
│   ├── orders/              # Order CRUD & routes
│   └── utils/
│       ├── __init__.py
│       └── common.py        # Pagination params & response helpers
├── .env.example
├── .gitignore
├── requirements.txt
└── README.md
```

---

## License

This project is for internal / educational use.
